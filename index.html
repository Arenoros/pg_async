<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>pg_async: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">pg_async
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">pg_async Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>pg_async is an unofficial PostreSQL database asynchronous client library written in modern C++ (std=c++11) on top of boost::asio library used for asynchronous network input-output.</p>
<h3>Features</h3>
<ul>
<li>Asynchronous operations</li>
<li>Connection pooling</li>
<li>Database aliases</li>
<li>Standard container-compliant resultset interface</li>
<li>Execution of prepared statements</li>
<li>Query queuing</li>
<li>Multiple result sets for simple query mode</li>
<li>Data row extraction to tuples</li>
<li>Flexible datatype conversion</li>
<li>Compile-time statement parameter types binding and checking</li>
<li>Extensible datatypes input-output system</li>
<li>TCP or UNIX socket connection</li>
</ul>
<h3>Short usage overview</h3>
<p>All classes are located in namespace <a class="el" href="namespacetip_1_1db_1_1pg.html">tip::db::pg</a>, if not specified other way.</p>
<h4>Registering a connection</h4>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="pg_8hpp.html">tip/db/pg.hpp</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">using namespace </span>tip::db::pg;</div>
<div class="line"><a class="code" href="classtip_1_1db_1_1pg_1_1db__service.html#a2bb5f48aa25f8b6aec65c5deb466633b">db_service::add_connection</a>(<span class="stringliteral">&quot;main=tcp://user:pass@the-database-server:5432[databasename]&quot;</span>);</div>
<div class="line"><a class="code" href="classtip_1_1db_1_1pg_1_1db__service.html#a2bb5f48aa25f8b6aec65c5deb466633b">db_service::add_connection</a>(<span class="stringliteral">&quot;logs=tcp://user:pass@the-database-server:5432[logs_db]&quot;</span>);</div>
<div class="line"></div>
<div class="line"><a class="code" href="classtip_1_1db_1_1pg_1_1db__service.html#afcc3efeef99bd1e77d0f28700560f4bb">db_service::run</a>();</div>
</div><!-- fragment --><dl class="section see"><dt>See Also</dt><dd><a class="el" href="connstring.html">Connection string and database alias</a> </dd>
<dd>
<a class="el" href="classtip_1_1db_1_1pg_1_1db__service.html">tip::db::pg::db_service</a> reference</dd></dl>
<h4>Transactions</h4>
<div class="fragment"><div class="line">db_service::begin(</div>
<div class="line">    <span class="stringliteral">&quot;main&quot;</span>_db, <span class="comment">// Database alias</span></div>
<div class="line">    <span class="comment">// Asynchronous callback, will be called as soon as a connection becomes</span></div>
<div class="line">    <span class="comment">// idle, and a new transaction will be started in it.</span></div>
<div class="line">    [] (<a class="code" href="namespacetip_1_1db_1_1pg.html#a0e05740b9d676d3eb8c764785014a009">transaction_ptr</a> tran)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Run the queries here</span></div>
<div class="line">        <span class="comment">// A transaction MUST be explicitly commited or it will be rolled back</span></div>
<div class="line">        tran-&gt;commit();</div>
<div class="line">    },</div>
<div class="line">    <span class="comment">// Transaction error handler.</span></div>
<div class="line">    [](db_error <span class="keyword">const</span>&amp; error)</div>
<div class="line">    {</div>
<div class="line">    }</div>
<div class="line">);</div>
</div><!-- fragment --><dl class="section see"><dt>See Also</dt><dd><a class="el" href="transactions.html">Transactions</a> </dd>
<dd>
<a class="el" href="connstring.html">Connection string and database alias</a> </dd>
<dd>
<a class="el" href="threads.html">Threads and thread safety</a> </dd>
<dd>
<a class="el" href="classtip_1_1db_1_1pg_1_1transaction.html" title="RAII transaction object. ">tip::db::pg::transaction</a> for reference</dd></dl>
<h4>Querying</h4>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="pg_8hpp.html">tip/db/pg.hpp</a>&gt;</span></div>
<div class="line"></div>
<div class="line">query(<span class="stringliteral">&quot;main&quot;</span>_db, <span class="stringliteral">&quot;select * from pg_catalog.pg_types&quot;</span>).run_async(</div>
<div class="line">[&amp;](<a class="code" href="namespacetip_1_1db_1_1pg.html#a0e05740b9d676d3eb8c764785014a009">transaction_ptr</a> t, resultset res, <span class="keywordtype">bool</span> complete) {</div>
<div class="line">    <span class="comment">// Process the query results</span></div>
<div class="line">},</div>
<div class="line">[&amp;](db_error <span class="keyword">const</span>&amp; err) {</div>
<div class="line">    <span class="comment">// Handle query error</span></div>
<div class="line">});</div>
</div><!-- fragment --><dl class="section see"><dt>See Also</dt><dd><a class="el" href="querying.html">Running queries</a> for more information </dd>
<dd>
<a class="el" href="errors.html">Errors and exceptions</a> </dd>
<dd>
<a class="el" href="callbacks.html">Callback types</a> </dd>
<dd>
<a class="el" href="valueio.html">Values input/output</a> </dd>
<dd>
<a class="el" href="classtip_1_1db_1_1pg_1_1query.html" title="Asynchronous query class. ">tip::db::pg::query</a> for reference</dd></dl>
<h4>Processing query results</h4>
<div class="fragment"><div class="line">resultset res; <span class="comment">// Passed to a callback from query</span></div>
<div class="line"><span class="keywordflow">if</span> (res) {</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> row : res) { <span class="comment">// Row iteration</span></div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keyword">auto</span> field : row) {</div>
<div class="line">            <a class="code" href="namespacetip_1_1db_1_1pg_1_1oids_1_1type__category.html#ac27caab84b1b9ca2db889191e8e3740ea26680b5383c9bd9c94f47cab2ee9b738">std::string</a> value = field.coalesce(<span class="stringliteral">&quot;default value&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section see"><dt>See Also</dt><dd><a class="el" href="results.html">Processing query results</a> for more information </dd>
<dd>
<a class="el" href="valueio.html">Values input/output</a> </dd>
<dd>
<a class="el" href="classtip_1_1db_1_1pg_1_1resultset.html">tip::db::pg::resultset</a> for reference </dd>
<dd>
<a class="el" href="classtip_1_1db_1_1pg_1_1resultset_1_1row.html">tip::db::pg::resultset::row</a> for reference </dd>
<dd>
<a class="el" href="classtip_1_1db_1_1pg_1_1resultset_1_1field.html">tip::db::pg::resultset::field</a> for reference </dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 3 2015 21:35:41 for pg_async by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
